<?xml version="1.0"?>
<launch>

  <!-- Arguments -->
  <arg name="robot_type" default="summit_xl"/>
  <arg name="prefix" default="robot_"/>
  <arg name="robot_name" default="$(arg prefix)$(arg robot_type)"/>
  <arg name="prefix_move_base" default="$(arg robot_name)_"/>
  <arg name="ns" default="/"/>
  <arg name="cmd_vel" default="robotnik_base_control/cmd_vel"/>

  <!-- Controller -->
  <rosparam file="$(find summit_xl_control)/config/summit_xl_parameters.yaml" command="load" subst_value="true"/>
  <node pkg="controller_manager" type="spawner" name="controller_spawner" ns="$(arg ns)" respawn="false" output="screen" args="
    robotnik_base_control
    joint_read_state_controller
    ">
  </node>

  <!-- Twist message muxer -->
  <node pkg="twist_mux" type="twist_mux" name="twist_mux" ns="$(arg ns)" respawn="false" output="screen">
    <rosparam command="load" file="$(find summit_xl_control)/config/summit_xl_twist_mux.yaml" />
    <remap from="cmd_vel_out" to="$(arg cmd_vel)" />
  </node>
  <node pkg="twist_mux" type="twist_marker" name="twist_marker" ns="$(arg ns)" respawn="false" output="screen">
    <remap from="twist" to="$(arg cmd_vel)"/>
    <remap from="marker" to="twist_marker"/>
  </node>

</launch>
